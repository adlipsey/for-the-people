<!DOCTYPE html>
<html>
<head>
	<title>For the People - Representative Bio</title>
	<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
	<link rel="stylesheet" href="styles.css">

	<style> #photo { width: 100%; height: auto; } .vote{ border: 2px solid black; padding: 10px; margin: 5px;} #photo {margin: 5px; width:100%; height: auto; } p.bill:hover {color: blue;}</style>
</head>

<body>
	<nav class="navbar">
        <a class="navbar-brand" href="#"><h4>For The People</h4></a>
        <ul class="nav nav-bar justify-content-end">
            <li class="nav-item">
                <p class="nav-link">Welcome, user</p>
            </li>
            <form>
                <button class="btn btn-outline-light my-2 my-sm-0" type="submit">Logout</button>
            </form>
        </ul>
    </nav>
	
	<div class="container" >
		<div class="row">
			<div class="col-lg-12" id="display">
				<h1 id="name">Rep. Soinso Whatsername</h1>
			</div>
		</div><!--End row-->
		<div class="row">
			<div class="col-lg-4">
				<img id="photo" src="http://www.divorce.legal/wp-content/uploads/2010/10/younger-business-woman.jpg">
			</div>
			<div class="col-lg-8">
				<div class="list-group">
				  <p class="list-group-item active main-color-bg">
					General Info
				  </p>
				  <p id="state"class="list-group-item">State: </p>
				  <p id="party"class="list-group-item">Party: </p>
				  <p id="office"class="list-group-item">Office: </p>
				  <p id="phone"class="list-group-item">Phone: </p>
				  <p id="twitter"class="list-group-item">Twitter: </p>
				</div>
			</div>



		</div><!--End of row-->

		<div class="row">
			<div class="col-lg-4">
				<div class="list-group">
				  <p class="list-group-item active main-color-bg">
					Voting Info
				  </p>
				  <p id="totVotes"class="list-group-item">Total Votes: </p>
				  <p id="missed"class="list-group-item">Percentage of Votes Missed: </p>
				  <p id="withParty"class="list-group-item">Percentage of Votes with Party: </p>
				  <p id="termEnd"class="list-group-item">Term End:</p>
				  <p class="list-group-item">Commitees: </p>
				  <ul id="committees" class="list-group-item"></ul>
				</div>


			</div>
			<div class="col-lg-8">
				<div class="list-group">
					<h5 class="list-group-item active main-color-bg">Recent Vote Activity</h5>
					<div id="votes" class="list-group-item">
						<!--Each "vote" section will be dynamically generated from the API call to the #votes div-->
						<!--End of dynamically generated content-->
					</div><!--End votes-->
				</div>
			</div><!--End col-->
		</div><!--End row-->
	</div><!--End of container-->
	<script type="text/javascript">
		$.get("/api/rep").done(function(res){
			console.log(JSON.stringify(res, null, 2));
			$("#name").text(res.title + " " + res.name);
			$("#state").text("State: " + res.state);
			$("#party").text("Party: " + res.party);
			$("#office").text("Office: " + res.office);
			$("#phone").text("Phone: " + res.phone);
			$("#twitter").text("Twitter: @" + res.twitter);
			$("#termEnd").text("Term Ends: "+ res.termEnd);
			$("#missed").text("Percentage of Votes Missed: "+ res.missedVotes+"%");
			$("#withParty").text("Percentage of Votes with Party: "+res.partyVotes+"%");
			$("#photo").attr("src", res.photo);
			res.committees.forEach(function(element){
				var committee = $("<li />");
				committee.text(element.name);
				committee.appendTo($("#committees"));
			});
			var leg;
			for(var i = 0; i < 10; i++){
				leg = $("<div />");
				leg.addClass("vote");
				leg.html("<div class='row'><div class='col-lg-4'><p>Bill ID: "+ res.votes[i].bill.number + "</p></div><div class='col-lg-8'><p class='bill'>" + res.votes[i].description + "</p></div></div><div class='row'><div class='col-lg-3'><p>Date: "+ res.votes[i].date + "</p></div><div class='col-lg-2'><p>Position: "+ res.votes[i].position + "</p></div><div class='col-lg-4'><p>Votes: "+ res.votes[i].total.yes + " Yes/"+ res.votes[i].total.no + " No</p></div><div class='col-lg-3'><p>Status: "+ res.votes[i].result + "</p></div></div>");
				leg.appendTo($("#votes"));
			}
		});
	</script>
</body>
</html>
